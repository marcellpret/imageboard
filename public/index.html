<!doctype html>
<html>

<head>
    <title>Imageboard</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;600;900&display=swap" rel="stylesheet">
</head>

<body>
    <div id='main'>
        <h1 class="logo">Image <span>ðŸ“·</span> Board</h1>

        <div class="add-image">
            <label for="title">Title</label>
            <input v-model='title' type="text" name="title" id="title">
            <label for="description">Description</label>
            <input v-model='description' type="text" name="description" id="description">
            <label for="username">Username</label>
            <input v-model='username' type="text" name="username" id="username">
            <label for="file">Upload Picture</label>
            <input type="file" name="file" id="file" accept="image/*" @change="handleFileSelection">
            <button v-on:click="uploadImage">Submit</button>
        </div>

        <!-- This container is for our Vue instance -->
        <!-- It will have access to our Vue code in script.js -->
        <div class="cards">
            <div v-for='img in images' :key='img.id' class="image-card"
                @click="selectImg(img.id, img.title, img.description, img.username, img.url)">
                <img :src="img.url" :alt="img.title">
                <div class="card-info">
                    <h3>{{img.title}}</h3>
                    <p>{{img.description}}</p>
                </div>
            </div>
            <div v-if="moreImages" class="more"><button v-on:click="getMore" class="more_btn">+</button></div>

        </div>



        <popup-image v-if="imgSelected" v-bind:img-id="imgSelected" v-bind:img-title="imgTitle"
            v-bind:img-description="imgDescription" v-bind:img-username="imgUsername" v-bind:img-url="imgUrl"
            @close="closeMe">
        </popup-image>
        <!-- end of first component inside main div -->
        <!-- looping over our moods -->

    </div>

    <script id="popup-image-template" type="text/x-template">
        <div class="popup-image">
            <div class="frame">
                <div class="close" @click="notifyParentToDoSth">x</div>
                <img :src="imgUrl" :alt="imgTitle">
                <div class="popup-info">
                <h1>{{imgTitle}}</h1>
                <h4>by {{imgUsername}}</h4>
                <p>{{imgDescription}}</p>
                <comments-component v-bind:img-id="imgId"></comments-component>
                </div>
            </div>
        </div>
            <!-- <div class="component">
                <h1>Here goes my component</h1>
                <h1 @click="notifyParentToDoSth">hey parent close me please!</h1>
                <h2> Hello {{name}} </h2>
                <h3>count currently is: {{count}}</h3>
                <button @click="updateCount"> Count up please!</button>
            </div> -->
        </script>
    <script id="comments-template" type="text/x-template">
            <div class="comments">
                <label for="comment">Leave a comment:</label>
                <textarea v-model='text' name="text" id="comment" cols="30" rows="10"></textarea>
                <label for="user_comment">By:</label>
                <input v-model='user_comment' type="text" name="user_comment" id="user_comment">
                
                <!-- <input type="hidden" name="image_id" :value='imgId'> -->
                <button v-on:click="addComment">Submit</button>
                <h3>Comments:</h3>
                <li v-for='comment in comments' :key='comment.id' class="comment">
                   <q>{{comment.text}}</q>
                   <em>{{comment.user_comment}}</em> 
                </li>
            </div>
    </script>

    <script src="/js/vue.js"></script>
    <script src="/js/axios.min.js"></script>
    <!-- Order matters! Make sure you link your script.js last -->
    <script src="/js/script.js"></script>
</body>

</html>